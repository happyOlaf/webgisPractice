<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>疫情可视化</title> 
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="assets/materialize/css/materialize.min.css" media="screen,projection" />
    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="assets/js/Lightweight-Chart/cssCharts.css">
    <script src="assets/js/jquery-3.4.1.min.js"></script>
    <script src="assets/js/jquery-3.4.1.js"></script>
    <script src="assets/js/echarts.min.js"></script>
    <script src="assets/js/china.js"></script>
	<script src="assets/js/hubei.js"></script>

</head>

<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle waves-effect waves-dark" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand waves-effect waves-dark" href="index.html"><i class="large material-icons">track_changes</i> <strong>全民战疫</strong></a>
        
    <div id="sideNav" href=""><i class="material-icons dp48">toc</i></div>
            </div>
        </nav>
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>疫情地图<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse in">
                            <li>
                                <a href="index.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>中国疫情地图</a>
                            </li>
                            <li>
                                <a href="hubei_map.html" class="active-menu waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>湖北疫情地图</a>
                            </li>
                            <li>
                                <a href="world.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>世界疫情地图</a>
                            </li>
                            <li>
                                <a href="US_map.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>美国疫情地图</a>
                            </li>                       
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>趋势分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="chart.html" class="waves-effect waves-dark"style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>中国趋势</a>
                            </li>
                            <li>
                                <a href="countries_chart.html" class="waves-effect waves-dark"style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>海外趋势</a>
                            </li>                       
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>数据概况<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="mytable.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>中国数据</a>
                            </li>
                            <li>
                                <a href="countries_data.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>海外数据</a>
                            </li>                   
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-desktop"></i>空间自相关分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="autocorrelation_hb.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>湖北疫情分析</a>
                            </li>
                            <li>
                                <a href="autocorrelation_usa.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>美国疫情分析</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-sitemap"></i>空间社会网络分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="network.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-sitemap"></i>国际关系分析</a>
                            </li>
                            <li>
                                <a href="wordcloud.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-edit"></i>词云展示</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="simulation.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-fw fa-tags"></i>疫情模拟预测</a>
                    </li>
                        </ul>
                    </li>
                </ul>

            </div>

        </nav>
	<div id="page-wrapper">
		  <div class="header"> 
            <h1 class="page-header">
           湖北疫情数据可视化
           </h1>
           <div class="divider" style=""></div>								
		 </div>
            <div id="page-inner">

			<div class="dashboard-cards"> 
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-3">
					
						<div class="card horizontal cardIcon waves-effect waves-dark">
						<div class="card-image red">
						<i class="material-icons dp48">supervisor_account</i>
						</div>
						<div class="card-stacked red">
						<div class="card-content">
							<h3>累计确诊数</h3> 
						</div>
						<div class="card-content">
							<h3 id="num01">84185</h3> 
						</div>
						</div>
						</div>
	 
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
					
						<div class="card horizontal cardIcon waves-effect waves-dark">
						<div class="card-image orange">
						<i class="material-icons dp48">supervisor_account</i>
						</div>
						<div class="card-stacked orange">
						<div class="card-content">
						    <h3>现有确诊数</h3> 
						</div>
						<div class="card-content">
							<h3 id="num02">1751</h3> 
						</div>
						</div>
						</div> 
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
					
							<div class="card horizontal cardIcon waves-effect waves-dark">
						<div class="card-image blue">
						<i class="material-icons dp48">supervisor_account</i>
						</div>
						<div class="card-stacked blue">
						<div class="card-content">
						    <h3>累计治愈数</h3> 
							</div>
							<div class="card-content">
							<h3 id="num03">77792</h3> 
						</div>
						</div>
						</div> 
						 
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
					
					<div class="card horizontal cardIcon waves-effect waves-dark">
						<div class="card-image black">
						<i class="material-icons dp48">supervisor_account</i>
						</div>
						<div class="card-stacked black">
						<div class="card-content">
						    <h3>累计死亡数</h3> 
						</div>
						<div class="card-content">
							<h3 id="num04">4642</h3> 
						</div>
						</div>
						</div> 
						 
                    </div>
                </div>
			   </div>
				<!-- /. ROW  -->
	<script type="text/javascript">
		 $.get('https://lab.isaaclin.cn/nCoV/api/area?latest=1&province=%E6%B9%96%E5%8C%97%E7%9C%81', function (data) {
	                var mydata = typeof data=='string'?JSON.parse(data):data;                
	                var confirmedCount = mydata.results[0].confirmedCount;
	                var currentConfirmedCount = mydata.results[0].currentConfirmedCount;      
	                var curedCount = mydata.results[0].curedCount;
	                var deadCount = mydata.results[0].deadCount;
	                $("#num01").text(confirmedCount);
	                $("#num02").text(currentConfirmedCount);
	                $("#num03").text(curedCount);
	                $("#num04").text(deadCount);
	        });
	</script>
    <div class="divider" style=""></div>	
	<div id="main01" style="width: 1200px;height:650px;margin: 0 auto;"></div>
    <script type="text/javascript">
		var Confirms=[];
		var date= [];
		var province=["鄂州","恩施州","黄冈","黄石","荆门","荆州","潜江","神农架","十堰","随州","天门","武汉","仙桃","咸宁","襄阳","孝感","宜昌"];

		    $.ajax({
		        type:"GET",
		        //url: "data/data_hubei_date.csv",
		        url: "http://localhost:8081/COVID-19/Hubei/all",
            	dataType: "json", 
		        success: function(results) {
		        	var k=1;
            		date[k-1]=1.21;
            		Confirms[k-1] = new Array();
            		for(var j = 0; j < 17; j++) {
                    	Confirms[k-1][j] = 0; //0表示只有一个空的红圈
               		}
               		var l=0;
            		$.each(results,function(i,n){
            			if (n.date!=date[k-1]){
            				date[k]=n.date;
            				Confirms[k] = new Array();
            				for(var j = 0; j < 17; j++) {
                             	   Confirms[k][j] = 0; //0表示只有一个空的红圈
               				}
               				k++;
            			}
            			if(l==17) l=0;
                    	Confirms[k-1][l]=n.confirm; 
                    	l++;
            		});
		            /*//转变为字符串
		            var rs = new String(results);         
		            var n_date = 0;
		            rs=rs.split("\n");
		            for (var i = 0; i < rs.length; i++) {
		                rs[i] = rs[i].split(",");
		            } 

		            //数组初始化
		            var L = parseInt((rs.length-1)/17);
		            for(var i = 0; i < L; i++) {
		                        date[i] = '';
		                        Confirms[i] = new Array();
		                        for(var j = 0; j < 17; j++) {
		                            Confirms[i][j] = 0; //0表示只有一个空的红圈
		                    }
		                } 


		            //获取值   
		            for (var i = 1; i < rs.length-1; i+=17) {
		                date[n_date]=rs[i][1];
		                for(var j = 0;j<17;j++){
		                     Confirms[n_date][j]=rs[i+j][2]; 
		                }

		                //将字符数组转换为数字数组
		                for(var k=0;k<L;k++){
		                     Confirms[n_date]=Confirms[n_date].map(Number)
		                }                  
		                n_date++;
		            }*/


		            var days=date;
		            var data=Confirms;  
		            var myChart = echarts.init(document.getElementById('main01'));
		           option = {
		                baseOption: {
		                    timeline: {
		                        axisType: 'category',
		                        // realtime: false,
		                        // loop: false,
		                        autoPlay: true,
		                        playInterval: 2000,
		                        symbolSize: 12,
		                        left: '5%',
		                        right: '5%',
		                        bottom: '0%',
		                        width: '95%',
		                        // controlStyle: {
		                        //     position: 'left'
		                        // },
		                        data: days,
		                        tooltip: {
		                            formatter: days
		                        },
		                    },

		                    tooltip: {
		                        show: true,
		                        trigger: 'item'
		                    },
		                    visualMap: {
		                        type: 'piecewise',
		                        pieces: [{
		                                min: 2001,
		                                color: '#BB0000'
		                            },
		                            {
		                                min: 1001,
		                                max: 2000,
		                                color: '#EE2C2C'
		                            },
		                               {
		                                min: 501,
		                                max: 1000,
		                                color: '#EE7600'
		                            },
		                            {
		                                min: 251,
		                                max: 500,
		                                color: '#FF8C00'
		                            },
		                            {
		                                min: 51,
		                                max: 250,
		                                color: '#FFD700'
		                            },
		                            {
		                                min: 1,
		                                max: 50,
		                                color: '#FFEC8B'
		                            },
		                            {
		                                value: 0,
		                                color: 'white'
		                            }
		                        ],
		                        orient: 'vertical',
		                        itemWidth: 25,
		                        itemHeight: 15,
		                        showLabel: true,
		                        seriesIndex: [0],

		                        textStyle: {
		                            color: '#7B93A7'
		                        },
		                        bottom: '10%',
		                        left: "5%",
		                    },
		                    grid: {
		                        right: '5%',
		                        top: '20%',
		                        bottom: '10%',
		                        width: '20%'
		                    },
		                    xAxis: {
		                        min: 0,
		                        max: 4000,
		                        show: false
		                    },
		                    yAxis: [{
		                        inverse: true,
		                        offset: '2',
		                        'type': 'category',
		                        data: '',
		                        nameTextStyle: {
		                            color: '#fff'
		                        },
		                        axisTick: {
		                            show: false,
		                        },
		                        axisLabel: {
		                            //rotate:45,
		                            textStyle: {
		                                fontSize: 14,
		                                color: '#000000',
		                            },
		                            interval: 0
		                        },
		                        axisLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            },
		                        },
		                        splitLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            }
		                        },
		                    }],
		                    geo: {
		                        map: '湖北',
		                        right: '35%',
		                        left: '20%',
		                        label: {
		                            emphasis: {
		                                show: false,
		                            }
		                        },
		                        itemStyle: {
		                            emphasis: {
		                                areaColor: '#FFD700'
		                            }
		                        }
		                    },
		                    series: [{
		                            name: '累计确诊数',
		                            type: 'map',
		                            map: '湖北',
		                            roam: false,
		                            geoIndex: 0,
		                            label: {
		                                show: false,
		                            },
		                        },
		                        {
		                            'name': '',
		                            'type': 'bar',
		                            zlevel: 2,
		                            barWidth: '40%',
		                            label: {
		                                normal: {
		                                    show: true,
		                                    fontSize: 14,
		                                    position: 'right',
		                                    formatter: '{c}'
		                                }
		                            },
		                        }
		                    ],

		                },
		                animationDurationUpdate: 3000,
		                animationEasingUpdate: 'quinticInOut',
		                options: []
		            };

		            for (var n = 0; n < data.length; n++) {
		                var res = [];
		                for (j = 0; j < province.length; j++) {

		                    res.push({
		                        name: province[j],
		                        value: data[n][j]            
		                    });
		                }


		                res.sort(function(a, b) {
		                    return a.value - b.value;
		                });
		                var res1 = [];
		                var res2 = [];
		                for (t = 0; t < 10; t++) {
		                    res1[t] = res[res.length - 1 - t].name;
		                    res2[t] = res[res.length - 1 - t].value;
		                }
		                console.log(res2);
		                /*console.log(res1);   
		                console.log(province);*/
		                console.log("----------------");
		                option.options.push({
		                    title: [{
		                             text: days[n] + "日累计确诊地图  ",
		                             textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 28,
		                                fontFamily:'sans-serif'
		                            },
		                            left: 20,
		                            top: 20,
		                        },
		                        {
		                            show: true,
		                            text: '确诊人数前十的市',
		                            textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 18
		                            },
		                            right: '10%',
		                            top: '15%'
		                        }
		                    ],
		                    yAxis: {
		                        data: res1,
		                    },
		                    series: [{
		                        type: 'map',
		                        data: res
		                    }, 
		                    {
		                        type: 'bar',
		                        data: res2,
		                        itemStyle: {
		                            normal: {
		                                color: function(params) {
		                                    // build a color map as your need.
		                                    var colorList = [{
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#FF0000' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#990000' // 100% 处的颜色
		                                            }]
		                                        },
		                                        {
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#FF8C00' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#FF4500' // 100% 处的颜色
		                                            }]
		                                        }
		                                    ];
		                                    if (params.dataIndex < 3) {
		                                        return colorList[0]
		                                    } else {
		                                        return colorList[1]
		                                    }
		                                },
		                            }
		                        },
		                    }]
		                });
		            }
		            myChart.setOption(option);
		        }
		    });
    </script>
    <div class="divider" style=""></div>	
    <div id="main02" style="width: 1200px;height:650px;margin: 0 auto;"></div>
    <script type="text/javascript">
		var Confirms=[];
		var date= [];
		var province=["鄂州","恩施州","黄冈","黄石","荆门","荆州","潜江","神农架","十堰","随州","天门","武汉","仙桃","咸宁","襄阳","孝感","宜昌"];
		    $.ajax({
		        type:"GET",		        		        
		        //url: "data/data_hubei_date.csv",
		        url: "http://localhost:8081/COVID-19/Hubei/all",
            	dataType: "json",  
		        success: function(results) {
		        	var k=1;
            		date[k-1]=1.21;
            		Confirms[k-1] = new Array();
            		for(var j = 0; j < 17; j++) {
                    	Confirms[k-1][j] = 0; //0表示只有一个空的红圈
               		}
               		var l=0;
            		$.each(results,function(i,n){
            			if (n.date!=date[k-1]){
            				date[k]=n.date;
            				Confirms[k] = new Array();
            				for(var j = 0; j < 17; j++) {
                	                Confirms[k][j] = 0; //0表示只有一个空的红圈
               				}
               				k++;
            			}
            			if(l==17) l=0;
                	    Confirms[k-1][l]=n.heal; 
                	    l++;
            		});
		            /*//转变为字符串
		            var rs = new String(results);         
		            var n_date = 0;
		            rs=rs.split("\n");
		            for (var i = 0; i < rs.length; i++) {
		                rs[i] = rs[i].split(",");
		            } 

		            //数组初始化
		            var L = parseInt((rs.length-1)/17);
		            for(var i = 0; i < L; i++) {
		                        date[i] = '';
		                        Confirms[i] = new Array();
		                        for(var j = 0; j < 17; j++) {
		                            Confirms[i][j] = 0; //0表示只有一个空的红圈
		                    }
		                } 
		            //获取值   
		            for (var i = 1; i < rs.length-1; i+=17) {
		                date[n_date]=rs[i][1];
		                for(var j = 0;j<17;j++){
		                     Confirms[n_date][j]=rs[i+j][4]; 
		                }

		                //将字符数组转换为数字数组
		                for(var k=0;k<L;k++){
		                     Confirms[n_date]=Confirms[n_date].map(Number)
		                }                  
		                n_date++;
		            }*/


		            var days=date;
		            var data=Confirms;  
		            var myChart = echarts.init(document.getElementById('main02'));
		           option = {
		                baseOption: {
		                    timeline: {
		                        axisType: 'category',
		                        // realtime: false,
		                        // loop: false,
		                        autoPlay: true,
		                        playInterval: 2000,
		                        symbolSize: 12,
		                        left: '5%',
		                        right: '5%',
		                        bottom: '0%',
		                        width: '95%',
		                        // controlStyle: {
		                        //     position: 'left'
		                        // },
		                        data: days,
		                        tooltip: {
		                            formatter: days
		                        },
		                    },

		                    tooltip: {
		                        show: true,
		                        trigger: 'item'
		                    },
		                    visualMap: {
		                        type: 'piecewise',
		                        pieces: [{
		                                min: 2001,
		                                color: '#008B00'
		                            },
		                            {
		                                min: 1001,
		                                max: 2000,
		                                color: '#00CD00'
		                            },
		                            {
		                                min: 501,
		                                max: 1000,
		                                color: '#00EE00'
		                            },
		                            {
		                                min: 251,
		                                max: 500,
		                                color: '#00FF00'
		                            },
		                            {
		                                min: 51,
		                                max: 250,
		                                color: '#00FF7F'
		                            },
		                            {
		                                min: 1,
		                                max: 50,
		                                color: '#97FFFF'
		                            },
		                            {
		                                value: 0,
		                                color: 'white'
		                            }
		                        ],
		                        orient: 'vertical',
		                        itemWidth: 25,
		                        itemHeight: 15,
		                        showLabel: true,
		                        seriesIndex: [0],

		                        textStyle: {
		                            color: '#7B93A7'
		                        },
		                        bottom: '10%',
		                        left: "5%",
		                    },
		                    grid: {
		                        right: '5%',
		                        top: '20%',
		                        bottom: '10%',
		                        width: '20%'
		                    },
		                    xAxis: {
		                        min: 0,
		                        max: 4000,
		                        show: false
		                    },
		                    yAxis: [{
		                        inverse: true,
		                        offset: '2',
		                        'type': 'category',
		                        data: '',
		                        nameTextStyle: {
		                            color: '#fff'
		                        },
		                        axisTick: {
		                            show: false,
		                        },
		                        axisLabel: {
		                            //rotate:45,
		                            textStyle: {
		                                fontSize: 14,
		                                color: '#000000',
		                            },
		                            interval: 0
		                        },
		                        axisLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            },
		                        },
		                        splitLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            }
		                        },
		                    }],
		                    geo: {
		                        map: '湖北',
		                        right: '35%',
		                        left: '20%',
		                        label: {
		                            emphasis: {
		                                show: false,
		                            }
		                        },
		                        itemStyle: {
		                            emphasis: {
		                                areaColor: '#FFD700'
		                            }
		                        }
		                    },
		                    series: [{
		                            name: '累计治愈数',
		                            type: 'map',
		                            map: '湖北',
		                            roam: false,
		                            geoIndex: 0,
		                            label: {
		                                show: false,
		                            },
		                        },
		                        {
		                            'name': '',
		                            'type': 'bar',
		                            zlevel: 2,
		                            barWidth: '40%',
		                            label: {
		                                normal: {
		                                    show: true,
		                                    fontSize: 14,
		                                    position: 'right',
		                                    formatter: '{c}'
		                                }
		                            },
		                        }
		                    ],

		                },
		                animationDurationUpdate: 3000,
		                animationEasingUpdate: 'quinticInOut',
		                options: []
		            };

		            for (var n = 0; n < data.length; n++) {
		                var res = [];
		                for (j = 0; j < province.length; j++) {

		                    res.push({
		                        name: province[j],
		                        value: data[n][j]            
		                    });
		                }

		                res.sort(function(a, b) {
		                    return a.value - b.value;
		                });
		                var res1 = [];
		                var res2 = [];
		                for (t = 0; t < 10; t++) {
		                    res1[t] = res[res.length - 1 - t].name;
		                    res2[t] = res[res.length - 1 - t].value;
		                }
		                /*console.log(res1);   
		                console.log(province);*/
		                option.options.push({
		                    title: [{
		                             text: days[n] + "日累计治愈地图  ",
		                             textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 28,
		                                fontFamily:'sans-serif'
		                            },
		                            left: 20,
		                            top: 20,
		                        },
		                        {
		                            show: true,
		                            text: '治愈人数前十的市',
		                            textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 18
		                            },
		                            right: '10%',
		                            top: '15%'
		                        }
		                    ],
		                    yAxis: {
		                        data: res1,
		                    },
		                    series: [{
		                        type: 'map',
		                        data: res
		                    }, 
		                    {
		                        type: 'bar',
		                        data: res2,
		                        itemStyle: {
		                            normal: {
		                                color: function(params) {
		                                    // build a color map as your need.
		                                    var colorList = [{
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#00CD00' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#008B00' // 100% 处的颜色
		                                            }]
		                                        },
		                                        {
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#97FFFF' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#00FF7F' // 100% 处的颜色
		                                            }]
		                                        }
		                                    ];
		                                    if (params.dataIndex < 3) {
		                                        return colorList[0]
		                                    } else {
		                                        return colorList[1]
		                                    }
		                                },
		                            }
		                        },
		                    }]
		                });
		            }
		            myChart.setOption(option);
		        }
		    });
    </script>
    <div class="divider" style=""></div>
    <div id="main03" style="width: 1200px;height:650px;margin: 0 auto;"></div>
    <script type="text/javascript">
		var Confirms=[];
		var date= [];
		var province=["鄂州","恩施州","黄冈","黄石","荆门","荆州","潜江","神农架","十堰","随州","天门","武汉","仙桃","咸宁","襄阳","孝感","宜昌"];


		    $.ajax({
		        type:"GET",
		        //url: "data/data_hubei_date.csv",
		        url: "http://localhost:8081/COVID-19/Hubei/all",
           		dataType: "json", 
		        success: function(results) {
		        	var k=1;
            		date[k-1]=1.21;
            		Confirms[k-1] = new Array();
            		for(var j = 0; j < 17; j++) {
                	    Confirms[k-1][j] = 0; //0表示只有一个空的红圈
               		}
               		var l=0;
            		$.each(results,function(i,n){
            			if (n.date!=date[k-1]){
            				date[k]=n.date;
            				Confirms[k] = new Array();
            				for(var j = 0; j < 17; j++) {
                	                Confirms[k][j] = 0; //0表示只有一个空的红圈
               				}
               				k++;
            			}
            			if(l==17) l=0;
                 	   Confirms[k-1][l]=n.dead; 
                	    l++;
            		});
		            /*//转变为字符串
		            var rs = new String(results);         
		            var n_date = 0;
		            rs=rs.split("\n");
		            for (var i = 0; i < rs.length; i++) {
		                rs[i] = rs[i].split(",");
		            } 

		            //数组初始化
		            var L = parseInt((rs.length-1)/17);
		            for(var i = 0; i < L; i++) {
		                        date[i] = '';
		                        Confirms[i] = new Array();
		                        for(var j = 0; j < 17; j++) {
		                            Confirms[i][j] = 0; //0表示只有一个空的红圈
		                    }
		                } 
		            //获取值   
		            for (var i = 1; i < rs.length-1; i+=17) {
		                date[n_date]=rs[i][1];
		                for(var j = 0;j<17;j++){
		                     Confirms[n_date][j]=rs[i+j][3]; 
		                }

		                //将字符数组转换为数字数组
		                for(var k=0;k<L;k++){
		                     Confirms[n_date]=Confirms[n_date].map(Number)
		                }                  
		                n_date++;
		            }*/


		            var days=date;
		            var data=Confirms;  
		            var myChart = echarts.init(document.getElementById('main03'));
		           option = {
		                baseOption: {
		                    timeline: {
		                        axisType: 'category',
		                        // realtime: false,
		                        // loop: false,
		                        autoPlay: true,
		                        playInterval: 2000,
		                        symbolSize: 12,
		                        left: '5%',
		                        right: '5%',
		                        bottom: '0%',
		                        width: '95%',
		                        // controlStyle: {
		                        //     position: 'left'
		                        // },
		                        data: days,
		                        tooltip: {
		                            formatter: days
		                        },
		                    },

		                    tooltip: {
		                        show: true,
		                        trigger: 'item'
		                    },
		                    visualMap: {
		                        type: 'piecewise',
		                        pieces: [{
		                                min: 101,
		                                color: '#262626'
		                            },
		                            {
		                                min: 51,
		                                max: 100,
		                                color: '#616161'
		                            },
		                            {
		                                min: 21,
		                                max: 50,
		                                color: '#808080'
		                            },
		                            {
		                                min: 11,
		                                max: 20,
		                                color: '#A9A9A9'
		                            },
		                            {
		                                min: 6,
		                                max: 10,
		                                color: '#D3D3D3'
		                            },
		                            {
		                                min: 1,
		                                max: 5,
		                                color: '#F5F5F5'
		                            },
		                            {
		                                value: 0,
		                                color: 'white'
		                            }
		                        ],
		                        orient: 'vertical',
		                        itemWidth: 25,
		                        itemHeight: 15,
		                        showLabel: true,
		                        seriesIndex: [0],

		                        textStyle: {
		                            color: '#7B93A7'
		                        },
		                        bottom: '10%',
		                        left: "5%",
		                    },
		                    grid: {
		                        right: '5%',
		                        top: '20%',
		                        bottom: '10%',
		                        width: '20%'
		                    },
		                    xAxis: {
		                        min: 0,
		                        max: 4000,
		                        show: false
		                    },
		                    yAxis: [{
		                        inverse: true,
		                        offset: '2',
		                        'type': 'category',
		                        data: '',
		                        nameTextStyle: {
		                            color: '#fff'
		                        },
		                        axisTick: {
		                            show: false,
		                        },
		                        axisLabel: {
		                            //rotate:45,
		                            textStyle: {
		                                fontSize: 14,
		                                color: '#000000',
		                            },
		                            interval: 0
		                        },
		                        axisLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            },
		                        },
		                        splitLine: {
		                            show: false,
		                            lineStyle: {
		                                color: '#333'
		                            }
		                        },
		                    }],
		                    geo: {
		                        map: '湖北',
		                        right: '35%',
		                        left: '20%',
		                        label: {
		                            emphasis: {
		                                show: false,
		                            }
		                        },
		                        itemStyle: {
		                            emphasis: {
		                                areaColor: '#FFD700'
		                            }
		                        }
		                    },
		                    series: [{
		                            name: '累计死亡数',
		                            type: 'map',
		                            map: '湖北',
		                            roam: false,
		                            geoIndex: 0,
		                            label: {
		                                show: false,
		                            },
		                        },
		                        {
		                            'name': '',
		                            'type': 'bar',
		                            zlevel: 2,
		                            barWidth: '40%',
		                            label: {
		                                normal: {
		                                    show: true,
		                                    fontSize: 14,
		                                    position: 'right',
		                                    formatter: '{c}'
		                                }
		                            },
		                        }
		                    ],

		                },
		                animationDurationUpdate: 3000,
		                animationEasingUpdate: 'quinticInOut',
		                options: []
		            };

		            for (var n = 0; n < data.length; n++) {
		                var res = [];
		                for (j = 0; j < province.length; j++) {

		                    res.push({
		                        name: province[j],
		                        value: data[n][j]            
		                    });
		                }

		                res.sort(function(a, b) {
		                    return a.value - b.value;
		                });
		                var res1 = [];
		                var res2 = [];
		                for (t = 0; t < 10; t++) {
		                    res1[t] = res[res.length - 1 - t].name;
		                    res2[t] = res[res.length - 1 - t].value;
		                }
		                /*console.log(res1);   
		                console.log(province);*/
		                option.options.push({
		                    title: [{
		                             text: days[n] + "日累计死亡地图  ",
		                             textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 28,
		                                fontFamily:'sans-serif'
		                            },
		                            left: 20,
		                            top: 20,
		                        },
		                        {
		                            show: true,
		                            text: '死亡人数前十的市',
		                            textStyle: {
		                                color: '#2D3E53',
		                                fontSize: 18
		                            },
		                            right: '10%',
		                            top: '15%'
		                        }
		                    ],
		                    yAxis: {
		                        data: res1,
		                    },
		                    series: [{
		                        type: 'map',
		                        data: res
		                    }, 
		                    {
		                        type: 'bar',
		                        data: res2,
		                        itemStyle: {
		                            normal: {
		                                color: function(params) {
		                                    // build a color map as your need.
		                                    var colorList = [{
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#616161' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#262626' // 100% 处的颜色
		                                            }]
		                                        },
		                                        {
		                                            colorStops: [{
		                                                offset: 0,
		                                                color: '#808080' // 0% 处的颜色
		                                            }, {
		                                                offset: 1,
		                                                color: '#A9A9A9' // 100% 处的颜色
		                                            }]
		                                        }
		                                    ];
		                                    if (params.dataIndex < 3) {
		                                        return colorList[0]
		                                    } else {
		                                        return colorList[1]
		                                    }
		                                },
		                            }
		                        },
		                    }]
		                });
		            }
		            myChart.setOption(option);
		        }
		    });
    </script>
            <!-- /. PAGE INNER  -->
    </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
    <script src="assets/js/jquery-1.10.2.js"></script>
	
	<!-- Bootstrap Js -->
    <script src="assets/js/bootstrap.min.js"></script>
	
	<script src="assets/materialize/js/materialize.min.js"></script>
	
    <!-- Metis Menu Js -->
    <script src="assets/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="assets/js/morris/morris.js"></script>
	
	
	<script src="assets/js/easypiechart.js"></script>
	<script src="assets/js/easypiechart-data.js"></script>
	
	 <script src="assets/js/Lightweight-Chart/jquery.chart.js"></script>
	
    <!-- Custom Js -->
    <script src="assets/js/custom-scripts.js"></script> 
 

</body>

</html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>疫情可视化</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="assets/materialize/css/materialize.min.css" media="screen,projection" />
    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="assets/js/Lightweight-Chart/cssCharts.css"> 
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.loading.min.js"></script>
    <script src="assets/js/echarts.min.js"></script>
</head>
<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand waves-effect waves-dark" href="index.html"><i class="large material-icons">track_changes</i> <strong>全民战疫</strong></a>
                
                <div id="sideNav" class="waves-effect waves-dark" href=""><i class="material-icons dp48">toc</i></div>
            </div>
        </nav>
      
<nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>疫情地图<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="index.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>中国疫情地图</a>
                            </li>
                            <li>
                                <a href="hubei_map.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>湖北疫情地图</a>
                            </li>
                            <li>
                                <a href="world.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>世界疫情地图</a>
                            </li>
                            <li>
                                <a href="US_map.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-dashboard"></i>美国疫情地图</a>
                            </li>                       
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>趋势分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="chart.html" class="waves-effect waves-dark"style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>中国各省</a>
                            </li>
                            <li>
                                <a href="hubei.html" class="waves-effect waves-dark"style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>湖北各市</a>
                            </li>
                            <li>
                                <a href="countries_chart.html" class="waves-effect waves-dark"style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>世界各国</a>
                            </li>                       
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>数据概况<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="mytable.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>中国数据</a>
                            </li>
                            <li>
                                <a href="countries_data.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>海外数据</a>
                            </li>                   
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-desktop"></i>空间自相关分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="autocorrelation_hb.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-bar-chart-o"></i>湖北疫情分析</a>
                            </li>
                            <li>
                                <a href="autocorrelation_usa.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-table"></i>美国疫情分析</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-sitemap"></i>空间社会网络分析<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="network.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-sitemap"></i>国际关系分析</a>
                            </li>
                            <li>
                                <a href="wordcloud.html" class="waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-edit"></i>词云展示</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="simulation.html" class="active-menu waves-effect waves-dark" style="font-size: 18px;margin-top: 6px;margin-bottom: 6px"><i class="fa fa-tags"></i>疫情模拟预测</a>
                    </li>
                        </ul>
                    </li>
                </ul>

            </div>

        </nav>
<!-- /. NAV SIDE  -->
<div id="page-wrapper">
    <div class="header"> 
        <h1 class="page-header">
           SEIR模型疫情模拟与预测
       </h1>
       <div class="divider" style=""></div>
      <!--  <ol class="breadcrumb">
      </ol> -->
</div>
 <div id="page-inner"> 
   
  <div class="row">                       
     <div class="col-md-6 col-sm-12 col-xs-12">                     
        <div class="card">
          <div class="card-header" style="font-size:22px; padding-top:20px;text-align:center; margin: 0 auto">
		       <strong>传统SEIR模型</strong>
		  </div>
            <div class="card-body">
               <div id="echarts1" style="width: 600px;height:450px;padding-top:20px;;margin: 0 auto"></div>
            </div> 
       </div>           
     </div>
     <div class="col-md-6 col-sm-12 col-xs-12">                     
        <div class="card">
          <div class="card-header" style="font-size:22px; padding-top:20px;text-align:center; margin: 0 auto">
				<strong>模拟现实疫情改进SEIR模型</strong>
		  </div>
            <div class="card-body" style="align-self: center;">
               <div id="echarts2" style="width: 600px;height:450px;padding-top:20px;margin: 0 auto"></div>
            </div> 
       </div>           
     </div>
  </div>

 <div class="row">                       
     <div class="col-md-6 col-sm-12 col-xs-12">                     
        <div class="card">
          <div class="card-header" style="font-size:22px; padding-top:20px;text-align:center; margin: 0 auto">
			<strong>湖北疫情模拟</strong>
		  </div>
            <div class="card-body">
               <div id="echarts3" style="width: 600px;height:450px;padding-top:20px;;margin: 0 auto"></div>
            </div> 
       </div>           
     </div>
     <div class="col-md-6 col-sm-12 col-xs-12">                     
        <div class="card">
          <div class="card-header" style="font-size:22px; padding-top:20px;text-align:center; margin: 0 auto">
			 <strong>中国疫情模拟</strong>
		  </div>
            <div class="card-body" style="align-self: center;">
               <div id="echarts4" style="width: 600px;height:450px;padding-top:20px;margin: 0 auto"></div>
            </div> 
       </div>           
     </div>
  </div>

     <script type="text/javascript">  
        var val = '武汉';
        DrawEcharts1();
        DrawEcharts2();
        DrawEcharts3();
        DrawEcharts4();
        <!-- $("#select").change(function(){ -->
        <!-- val=$(this).val(); -->
        <!-- DrawEcharts1(val); -->
        <!-- DrawEcharts2(val); -->
        <!-- DrawEcharts3(val); -->
        <!-- DrawEcharts4(val); -->
    <!-- }); -->
        // 指定图表的配置项和数据
		/*湖北和中国预测图*/
		
			
		
			
		/*myseir模型图*/
		
		
			
     
     function DrawEcharts1(){
        // 基于准备好的dom，初始化echarts实例
		/*传统seir模型图*/
		var sus = [];
		var exp = [];
		var inf = [];
		var rec = [];
		var day3 = [];
		$.ajax({
		        type:"GET",
		        url: "data/seir.csv",
		        success: function(results) {
		            //转变为字符串
		            var rs = new String(results);         
		            var n_date = 0;
		            rs=rs.split("\n");
		            for (var i = 0; i < rs.length; i++) {
		                rs[i] = rs[i].split(",");						
		            } 
					for(var i = 0; i < rs.length; i++) {//初始化？
		                    day3[i] = '';		                        		                 		                    
							sus[i] = 1500;
							exp[i] = 0;
							inf[i] = 0;
							rec[i] = 0;		                    							
		                } 
									
					for (var i = 1; i < rs.length; i++) {
		                
						sus[i] = rs[i][0];
						exp[i] = rs[i][1];
						inf[i] = rs[i][2];
						rec[i] = rs[i][3];
							
		            } 
					for (var i = rs.length-1; i < rs.length; i++) {
		                
						sus[i] = rs[i-1][0];
						exp[i] = rs[i-1][1];
						inf[i] = rs[i-1][2];
						rec[i] = rs[i-1][3];
					}   
					//console.log(rs.length);
					
					
					for(var i = 0; i < rs.length ; i++) {
						day3[i] = i + 1 ;
					}
					//console.log(day3);
					var myChart1 = echarts.init(document.getElementById('echarts1'));
					var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow',
                                    label: {
                                        show: true
                                    }
                                }
                            },
                            toolbox: {
                                show: true,
                                feature: {
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                },
                                right:'4%'
                            },
                            calculable: true,
                            legend: {
                                data: ['易感者', '潜伏者','感染者','康复者'],
                                itemGap: 5
                            },
                            grid: {
                                top: '12%',
                                left: '1%',
                                right: '10%',
                                containLabel: true
                            },
                            xAxis: [
                                {
                                    type: 'category',
									
                                    data: day3
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: '人数',
                                }
                                
                            ],

                            dataZoom: [
                                {
                                    show: true,
                                    start: 0,
                                    end: 100
                                },
                                {
                                    type: 'inside',
                                    start: 50,
                                    end: 100
                                },
                                /*{
                                    show: true,
                                    yAxisIndex: 0,
                                    filterMode: 'empty',
                                    width: 30,
                                    height: '80%',
                                    showDataShadow: false,
                                    left: '93%'
                                }*/
                            ],
                            series: [
                                
								{
                                    name: '易感者',
                                    type: 'line',
                                    data: sus,
                                    itemStyle:{
                                        normal:{
                                            color:'#B0C4DE'
                                        }
                                    }
                                },
								{
                                    name: '潜伏者',
                                    type: 'line',
                                    data: exp,
                                    itemStyle:{
                                        normal:{
                                            color:'	#FFD700'
                                        }
                                    }
                                },
								{
                                    name: '感染者',
                                    type: 'line',
                                    data: inf,
                                    itemStyle:{
                                        normal:{
                                            color:'#FF0000'
                                        }
                                    }
                                },
								{
                                    name: '康复者',
                                    type: 'line',
                                    data: rec,
                                    itemStyle:{
                                        normal:{
                                            color:'#90EE90'
                                        }
                                    }
                                },
                            ]
                        };
                       myChart1.setOption(option);
				}	
			});
                        
        }
      function DrawEcharts2(){
        
			var m_tot = [];
			var m_sus = [];
			var m_exp = [];
			var m_inf = [];
			var m_rec = [];
			var day2 = [];
			$.ajax({
					type:"GET",
					url: "data/myseir.csv",
					success: function(results) {
						//转变为字符串
						var rs = new String(results);         
						var n_date = 0;
						rs=rs.split("\n");
						for (var i = 0; i < rs.length; i++) {
							rs[i] = rs[i].split(",");						
						} 
						for(var i = 0; i < rs.length; i++) {//初始化？
								day2[i] = '';		                        		                 
								m_tot[i] = "1500";
								m_sus[i] = "1500";
								m_exp[i] = "0";
								m_inf[i] = "0";
								m_rec[i] = "0";		                    							
							} 
										
						for (var i = 1; i < rs.length; i++) {
							m_tot[i] = rs[i][0];
							m_sus[i] = rs[i][1];
							m_exp[i] = rs[i][2];
							m_inf[i] = rs[i][3];
							m_rec[i] = rs[i][4];
								
						} 
						for (var i = rs.length-1; i < rs.length; i++) {
							m_tot[i] = rs[i-1][0];
							m_sus[i] = rs[i-1][1];
							m_exp[i] = rs[i-1][2];
							m_inf[i] = rs[i-1][3];
							m_rec[i] = rs[i-1][4];
						}   
						console.log(m_tot);
						
						
						for(var i = 0; i < rs.length ; i++) {
							day2[i] = i + 1 ;
						}
						console.log(day2);
						
						var myChart2 = echarts.init(document.getElementById('echarts2'));
						var option = {
							tooltip: {
								trigger: 'axis',
								axisPointer: {
									type: 'shadow',
									label: {
										show: true
									}
								}
							},
							toolbox: {
								show: true,
								feature: {
									restore: {show: true},
									saveAsImage: {show: true}
								},
								right:'4%'
							},
							calculable: true,
							legend: {
								data: ['总人数','易感者','潜伏者','感染者','康复者'],
								itemGap: 5
							},
							grid: {
								top: '12%',
								left: '1%',
								right: '10%',
								containLabel: true
							},
							xAxis: [
								{
									type: 'category',
									
									data: day2
								}
							],
							yAxis: [
								{
									type: 'value',
									name: '人数',
								},
							],

							dataZoom: [
								{
									show: true,
									start: 0,
									end: 100
								},
								{
									type: 'inside',
									start: 50,
									end: 100
								},
							],
							series: [
								{
									name: '总人数',
									type: 'line',
									data: m_tot,
									itemStyle:{
										normal:{
											color:'#0000CD'
										}
									}
								},
								{
									name: '易感者',
									type: 'line',
									data: m_sus,
									itemStyle:{
										normal:{
											color:'#B0C4DE'
										}
									}
								},
								{
									name: '潜伏者',
									type: 'line',
									data: m_exp,
									itemStyle:{
										normal:{
											color:'	#FFD700'
										}
									}
								},
								{
									name: '感染者',
									type: 'line',
									data: m_inf,
									itemStyle:{
										normal:{
											color:'#FF0000'
										}
									}
								},
								{
									name: '康复者',
									type: 'line',
									data: m_rec,
									itemStyle:{
										normal:{
											color:'#90EE90'
										}
									}
								}
							]
						};

					   myChart2.setOption(option);
						
						
						
						
					}	
				});

            
            
     }
	    function DrawEcharts3(){
			var seir_ch = [];
			var seir_hb = [];
			var real_ch = [];
			var real_hb = [];
			var day = [];
			$.ajax({
					type:"GET",
					url: "data/compare.csv",
					success: function(results) {
						//转变为字符串
						var rs = new String(results);         
						var n_date = 0;
						rs=rs.split("\n");
						for (var i = 0; i < rs.length; i++) {
							rs[i] = rs[i].split(",");						
						} 
						for(var i = 0; i < rs.length; i++) {//初始化？
								day[i] = '';
									
								seir_ch[i] = 0; //0表示只有一个空的红圈
								real_hb[i] = 0;
								seir_hb[i] = 0;
								real_ch[i] = 0;
								
							} 
															
						for (var i = 1; i < rs.length; i++) {
							real_hb[i] = rs[i][0];
							seir_hb[i] = rs[i][3];
							real_ch[i] = rs[i][1];
							seir_ch[i] = rs[i][5];
						} 
						for (var i = rs.length-1; i < rs.length; i++) {
							real_hb[i] = rs[i-1][0];
							seir_hb[i] = rs[i-1][3];
							real_ch[i] = rs[i-1][1];
							seir_ch[i] = rs[i-1][5];
						} 
						//console.log(rs.length);
						//console.log(seir_hb);
						//console.log(seir_ch);
						for(var i = 0; i < rs.length ; i++) {
							day[i] = i + 1 ;
						}
						//console.log(day);
						var myChart3 = echarts.init(document.getElementById('echarts3'));
						var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow',
                                    label: {
                                        show: true
                                    }
                                }
                            },
							/*title: {
							    left:'center',
								bottom: '93%',
								text: '湖北疫情模拟'
							},*/
                            toolbox: {
                                show: true,
                                feature: {
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                },
                                right:'4%'
                            },
                            calculable: true,
                            legend: {
							    
                                data: ['实际', '模拟'],
                                itemGap: 5
                            },
                            grid: {
                                top: '12%',
                                left: '1%',
                                right: '10%',
                                containLabel: true
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    data: day,
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: '患病人数',
                                },
                                
                            ],

                            dataZoom: [
                                {
                                    show: true,
                                    start: 0,
                                    end: 100
                                },
                                {
                                    type: 'inside',
                                    start: 50,
                                    end: 100
                                },
                                /*{
                                    show: true,
                                    yAxisIndex: 0,
                                    filterMode: 'empty',
                                    width: 30,
                                    height: '80%',
                                    showDataShadow: false,
                                    left: '93%'
                                }*/
                            ],
                            series: [
                                {
                                    name: '模拟',
                                    type: 'line',
                                    data: seir_hb,
                                },
								{
                                    name: '实际',
                                    type: 'line',
                                    data: real_hb,
                                }
                                /*{
                                    name: '新增确诊数',
                                    type: 'bar',
                                    yAxisIndex:1,
                                    data: confirms_add,
                                    itemStyle:{
                                        normal:{
                                            color:'#FF8C00'
                                        }
                                    }
                                }*/
                            ]
                        };

                       myChart3.setOption(option);
						
					}	
				});
		
                       
      }
       function DrawEcharts4(val){
        // 基于准备好的dom，初始化echarts实例
			var seir_ch = [];
			
			var real_ch = [];
			
			var day = [];
			$.ajax({
					type:"GET",
					url: "data/compare.csv",
					success: function(results) {
						//转变为字符串
						var rs = new String(results);         
						var n_date = 0;
						rs=rs.split("\n");
						for (var i = 0; i < rs.length; i++) {
							rs[i] = rs[i].split(",");						
						} 
						for(var i = 0; i < rs.length; i++) {//初始化？
								day[i] = '';
									
								seir_ch[i] = 0; //0表示只有一个空的红圈
								
								real_ch[i] = 0;
								
							} 
															
						for (var i = 1; i < rs.length; i++) {
							
							real_ch[i] = rs[i][1];
							seir_ch[i] = rs[i][5];
						} 
						for (var i = rs.length-1; i < rs.length; i++) {
							
							real_ch[i] = rs[i-1][1];
							seir_ch[i] = rs[i-1][5];
						} 
						//console.log(rs.length);
						//console.log(seir_hb);
						//console.log(seir_ch);
						for(var i = 0; i < rs.length ; i++) {
							day[i] = i + 1 ;
						}
						var myChart4 = echarts.init(document.getElementById('echarts4'));
						var option = {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow',
                                    label: {
                                        show: true
                                    }
                                }
                            },
							/*title: {
							    left:'center',
								bottom: '95%',
								text: '中国疫情模拟'
							},*/
                            toolbox: {
                                show: true,
                                feature: {
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                },
                                right:'4%'
                            },
                            calculable: true,
                            legend: {
							    
                                data: ['实际','模拟'],
                                itemGap: 5
                            },
                            grid: {
                                top: '12%',
                                left: '1%',
                                right: '10%',
                                containLabel: true
                            },
                            xAxis: [
                                {
                                    type: 'category',
                                    data: day
                                }
                            ],
                            yAxis: [
                                {
                                    type: 'value',
                                    name: '患病人数',
                                },
                            ],

                            dataZoom: [
                                {
                                    show: true,
                                    start: 0,
                                    end: 100
                                },
                                {
                                    type: 'inside',
                                    start: 50,
                                    end: 100
                                },
                                /*{
                                    show: true,
                                    yAxisIndex: 0,
                                    filterMode: 'empty',
                                    width: 30,
                                    height: '80%',
                                    showDataShadow: false,
                                    left: '93%'
                                }*/
                            ],
                            series: [
                                {
                                    name: '实际',
                                    type: 'line',
                                    data: real_ch,
                                    itemStyle:{
                                        normal:{
                                            color:'#66CD00'
                                        }
                                    }
                                },
								{
                                    name: '模拟',
                                    type: 'line',
                                    data: seir_ch,
                                    itemStyle:{
                                        normal:{
                                            color:'#191970'
                                        }
                                    }
                                },
                            ]
                        };

                       myChart4.setOption(option);
						
					}
				});
						//console.log(day);
            
            
     }
     
   </script>




<footer></footer>
</div>
<!-- /. PAGE INNER  -->
</div>
<!-- /. PAGE WRAPPER  -->
</div>
<!-- /. WRAPPER  -->
<!-- JS Scripts-->
<!-- jQuery Js -->
<script src="assets/js/jquery-1.10.2.js"></script>

<!-- Bootstrap Js -->
<script src="assets/js/bootstrap.min.js"></script>

<script src="assets/materialize/js/materialize.min.js"></script>

<!-- Metis Menu Js -->
<script src="assets/js/jquery.metisMenu.js"></script>
<!-- Morris Chart Js -->
<script src="assets/js/morris/raphael-2.1.0.min.js"></script>
<script src="assets/js/morris/morris.js"></script>



<script src="assets/js/easypiechart.js"></script>
<script src="assets/js/easypiechart-data.js"></script>

<script src="assets/js/Lightweight-Chart/jquery.chart.js"></script>

<!-- Custom Js -->
<script src="assets/js/custom-scripts.js"></script> 


</body>

</html>
